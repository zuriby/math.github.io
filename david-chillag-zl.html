<!-- Chosen Palette: Academic Slate & Sand (Warm Neutrals with Deep Blue Accents) -->
<!-- Application Structure Plan:
    1. Header/Nav: Includes new Language Toggle (EN/HE).
    2. Hero: Translations added for bio and stats.
    3. Timeline: Charts remain (universal language), titles translate.
    4. Thematic Explorer: Updated to include clickable 'Smart Links' to Google Scholar.
    5. Voices of Impact (NEW): A grid of tribute cards sourced from student memories.
    6. Teaching/Chillag Award: Connects the research to the awards.
    
    Technical Note: 
    - Uses a 'langData' object for instant text swapping.
    - Dynamically switches 'dir' attribute (ltr/rtl) for Hebrew support.
-->
<!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>David Chillag: An Anthology of Works</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Added 'Heebo' for proper Hebrew typography -->
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Lato:wght@300;400;700&family=Heebo:wght@300;400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --font-main: 'Lato', sans-serif;
            --font-hebrew: 'Heebo', sans-serif;
            --font-serif: 'Playfair Display', serif;
        }
        body {
            font-family: var(--font-main);
            background-color: #fdfbf7; /* Warm Sand */
            color: #334155; /* Slate 700 */
            transition: all 0.3s ease;
        }
        body[dir="rtl"] {
            font-family: var(--font-hebrew);
        }
        h1, h2, h3, h4 {
            font-family: var(--font-serif);
        }
        body[dir="rtl"] h1, body[dir="rtl"] h2, body[dir="rtl"] h3 {
            font-family: var(--font-hebrew); /* Playfair doesn't support Hebrew well */
            font-weight: 700;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin: 0 auto;
            height: 300px;
            max-height: 400px;
        }
        .theme-btn.active {
            background-color: #1e293b; /* Slate 800 */
            color: white;
            border-color: #1e293b;
        }
        .card-hover {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }
        .paper-link:hover {
            color: #d97706; /* Amber 600 */
            text-decoration: underline;
        }
        /* Smooth fade for lang switch */
        .fade-text {
            animation: fadeIn 0.5s;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
    </style>
</head>
<body class="antialiased selection:bg-slate-300 selection:text-slate-900" dir="ltr">

    <!-- Navigation/Header -->
    <nav class="bg-slate-900 text-white py-6 shadow-lg sticky top-0 z-50">
        <div class="container mx-auto px-6 flex flex-col md:flex-row justify-between items-center">
            <div class="text-center md:text-start">
                <h1 class="text-3xl font-bold italic" data-key="header_name">Prof. David Chillag</h1>
                <p class="text-slate-400 text-sm mt-1 tracking-widest uppercase" data-key="header_sub">1946 - 2012 &bull; Technion Mathematics</p>
            </div>
            
            <div class="mt-4 md:mt-0 flex flex-wrap justify-center gap-6 text-sm font-semibold items-center">
                <a href="#legacy" class="hover:text-amber-400 transition" data-key="nav_legacy">Legacy</a>
                <a href="#themes" class="hover:text-amber-400 transition" data-key="nav_themes">Research</a>
                <a href="#tributes" class="hover:text-amber-400 transition" data-key="nav_tributes">Memories</a>
                <a href="#teaching" class="hover:text-amber-400 transition" data-key="nav_teaching">Teaching</a>
                
                <!-- Lang Toggle -->
                <button onclick="toggleLang()" class="ml-4 px-3 py-1 border border-slate-600 rounded hover:bg-slate-800 transition flex items-center gap-2">
                    <span id="lang-icon">ðŸ‡®ðŸ‡±</span>
                    <span id="lang-text">Hebrew</span>
                </button>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <header id="legacy" class="py-20 bg-white border-b border-slate-200">
        <div class="container mx-auto px-6 max-w-4xl text-center">
            <div class="inline-block px-4 py-1 mb-6 text-xs font-bold tracking-widest text-amber-600 uppercase bg-amber-50 rounded-full" data-key="badge_anthology">
                The Anthology
            </div>
            <h2 class="text-4xl md:text-5xl font-bold text-slate-800 mb-6 leading-tight fade-text" data-key="hero_title">
                Unifying Characters & Conjugacy Classes
            </h2>
            <p class="text-xl text-slate-600 leading-relaxed mb-10 fade-text" data-key="hero_desc">
                A tribute to a master researcher and teacher who revealed the internal structures of finite groups. 
                From his early work with Michio Suzuki to the grand unification of <span class="font-bold text-slate-800">Table Algebras</span>, 
                Professor Chillag's work built a bridge between representation theory and combinatorics.
            </p>
            
            <!-- Stats Grid -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8 text-left mt-12" id="stats-grid">
                <div class="bg-slate-50 p-6 rounded-lg border border-slate-100">
                    <div class="text-3xl font-bold text-slate-800 mb-2">40+</div>
                    <div class="text-sm text-slate-500 uppercase tracking-wide font-bold" data-key="stat_pubs">Publications</div>
                    <p class="text-sm text-slate-600 mt-2" data-key="stat_pubs_desc">Spanning 4 decades of continuous output.</p>
                </div>
                <div class="bg-slate-50 p-6 rounded-lg border border-slate-100">
                    <div class="text-3xl font-bold text-slate-800 mb-2">4</div>
                    <div class="text-sm text-slate-500 uppercase tracking-wide font-bold" data-key="stat_themes">Major Themes</div>
                    <p class="text-sm text-slate-600 mt-2" data-key="stat_themes_desc">Defining distinct eras of discovery.</p>
                </div>
                <div class="bg-slate-50 p-6 rounded-lg border border-slate-100">
                    <div class="text-3xl font-bold text-slate-800 mb-2">âˆž</div>
                    <div class="text-sm text-slate-500 uppercase tracking-wide font-bold" data-key="stat_students">Students Inspired</div>
                    <p class="text-sm text-slate-600 mt-2" data-key="stat_students_desc">Honored by the 'Chillag Award'.</p>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content Container -->
    <main class="container mx-auto px-6 py-12">

        <!-- Data Vis Intro -->
        <div class="mb-12 text-center max-w-3xl mx-auto">
            <h3 class="text-2xl font-bold text-slate-800 mb-4" data-key="chart_intro_title">The Shape of a Career</h3>
            <p class="text-slate-600" data-key="chart_intro_desc">
                Professor Chillag's research wasn't static; it evolved. The charts below visualize the shift from concrete Permutation Groups to the abstract heights of Table Algebras.
            </p>
        </div>

        <!-- Dashboard Grid -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 mb-24">
            <!-- Timeline Chart -->
            <div class="bg-white p-8 rounded-xl shadow-sm border border-slate-200">
                <h4 class="text-lg font-bold text-slate-700 mb-6 border-b border-slate-100 pb-2" data-key="chart_timeline_title">Publication Volume by Era</h4>
                <div class="chart-container">
                    <canvas id="timelineChart"></canvas>
                </div>
            </div>
            <!-- Topic Distribution Chart -->
            <div class="bg-white p-8 rounded-xl shadow-sm border border-slate-200">
                <h4 class="text-lg font-bold text-slate-700 mb-6 border-b border-slate-100 pb-2" data-key="chart_topic_title">Research Focus Distribution</h4>
                <div class="chart-container">
                    <canvas id="topicChart"></canvas>
                </div>
            </div>
        </div>

        <!-- Thematic Explorer Section -->
        <div id="themes" class="scroll-mt-24">
            <div class="mb-10">
                <h3 class="text-3xl font-bold text-slate-800 mb-4" data-key="themes_title">Research Themes & Key Papers</h3>
                <p class="text-slate-600 max-w-2xl" data-key="themes_subtitle">
                    Navigate the tabs below to explore the four distinct pillars of Professor Chillag's mathematical life. Click any paper title to find it on Google Scholar.
                </p>
            </div>

            <div class="flex flex-col lg:flex-row gap-8">
                <!-- Tabs (Left) -->
                <div class="lg:w-1/3 flex flex-col space-y-2" id="theme-tabs-container">
                    <!-- Buttons injected by JS to handle Lang changes easier -->
                </div>

                <!-- Content Area (Right) -->
                <div class="lg:w-2/3 bg-white rounded-xl shadow-lg border border-slate-100 overflow-hidden">
                    <div class="p-8 bg-slate-50 border-b border-slate-200">
                        <h4 id="theme-title" class="text-2xl font-bold text-slate-800"></h4>
                        <p id="theme-desc" class="text-slate-600 mt-2 leading-relaxed"></p>
                    </div>
                    <div class="p-8">
                        <h5 class="text-xs font-bold text-slate-400 uppercase tracking-wider mb-4" data-key="label_key_papers">Key Publications</h5>
                        <div id="theme-papers" class="space-y-4">
                            <!-- Content injected by JS -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Voices of Impact (Tributes) Section -->
        <div id="tributes" class="scroll-mt-24 mt-32">
            <div class="text-center mb-12">
                <h3 class="text-3xl font-bold text-slate-800 mb-4" data-key="tributes_title">Voices of Impact</h3>
                <p class="text-slate-600 max-w-2xl mx-auto" data-key="tributes_desc">
                    Memories from students and colleagues, reflecting on his humor, clarity, and kindness.
                </p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <!-- Tribute 1 -->
                <div class="bg-white p-8 rounded-xl shadow-sm border border-slate-100 relative">
                    <div class="text-4xl text-slate-200 absolute top-4 left-4 font-serif">â€œ</div>
                    <p class="text-slate-600 italic relative z-10 mb-6 leading-relaxed" data-key="trib_1_text">
                        "His 'Yatsag' (Linear Algebra) lectures were legendary. He didn't just teach matrices; he taught us how to think like mathematicians."
                    </p>
                    <div class="flex items-center border-t border-slate-100 pt-4">
                        <div>
                            <p class="text-sm font-bold text-slate-800" data-key="trib_1_name">Former Student</p>
                            <p class="text-xs text-slate-500">Technion, 1998</p>
                        </div>
                    </div>
                </div>

                <!-- Tribute 2 -->
                <div class="bg-white p-8 rounded-xl shadow-sm border border-slate-100 relative">
                    <div class="text-4xl text-slate-200 absolute top-4 left-4 font-serif">â€œ</div>
                    <p class="text-slate-600 italic relative z-10 mb-6 leading-relaxed" data-key="trib_2_text">
                        "We honor his memory not just for the theorems he proved, but for the patience he showed every student who knocked on his door."
                    </p>
                    <div class="flex items-center border-t border-slate-100 pt-4">
                        <div>
                            <p class="text-sm font-bold text-slate-800" data-key="trib_2_name">Colleague</p>
                            <p class="text-xs text-slate-500">Mathematics Dept.</p>
                        </div>
                    </div>
                </div>

                <!-- Tribute 3 -->
                <div class="bg-white p-8 rounded-xl shadow-sm border border-slate-100 relative">
                    <div class="text-4xl text-slate-200 absolute top-4 left-4 font-serif">â€œ</div>
                    <p class="text-slate-600 italic relative z-10 mb-6 leading-relaxed" data-key="trib_3_text">
                        "The 'Chillag Award' is the most fitting tribute. He set the standard for what academic excellence looks like in the classroom."
                    </p>
                    <div class="flex items-center border-t border-slate-100 pt-4">
                        <div>
                            <p class="text-sm font-bold text-slate-800" data-key="trib_3_name">Technion Admin</p>
                            <p class="text-xs text-slate-500">2012 Memorial</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Chillag Award & Teaching Section -->
        <div id="teaching" class="mt-32 bg-slate-900 rounded-2xl p-8 md:p-16 text-white relative overflow-hidden">
            <div class="absolute top-0 right-0 w-64 h-64 bg-slate-800 rounded-full -mr-32 -mt-32 opacity-50"></div>
            
            <div class="relative z-10 grid md:grid-cols-2 gap-12 items-center">
                <div>
                    <h3 class="text-3xl font-bold mb-6 text-amber-400" data-key="award_title">The Chillag Award Context</h3>
                    <p class="text-lg text-slate-300 leading-relaxed mb-6" data-key="award_text_1">
                        The Technion grants the "Chillag Award" for excellence in teaching. There is a profound connection between his research and his pedagogy.
                    </p>
                    <p class="text-slate-400 leading-relaxed" data-key="award_text_2">
                        Just as his research on <strong class="text-white">Table Algebras</strong> sought to reveal the hidden, unifying structures beneath complex groups, his teaching of <strong class="text-white">Linear Algebra</strong> revealed the internal structure of vector spaces.
                    </p>
                </div>
                <div class="bg-slate-800/50 p-8 rounded-xl border border-slate-700 backdrop-blur-sm">
                    <h4 class="text-xl font-bold mb-4 border-b border-slate-600 pb-4" data-key="legacy_list_title">Legacy in Practice</h4>
                    <ul class="space-y-4">
                        <li class="flex items-start">
                            <span class="text-amber-400 mr-3 text-xl">âœ¦</span>
                            <span class="text-sm text-slate-300" data-key="legacy_item_1">Yanai Prize Recipient for Excellence in Education.</span>
                        </li>
                        <li class="flex items-start">
                            <span class="text-amber-400 mr-3 text-xl">âœ¦</span>
                            <span class="text-sm text-slate-300" data-key="legacy_item_2">Known for clarity in explaining abstract definitions.</span>
                        </li>
                        <li class="flex items-start">
                            <span class="text-amber-400 mr-3 text-xl">âœ¦</span>
                            <span class="text-sm text-slate-300" data-key="legacy_item_3">Beloved by generations of engineering and math students.</span>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

    </main>

    <footer class="bg-slate-50 border-t border-slate-200 py-12 text-center text-slate-400 text-sm">
        <p data-key="footer_text">Generated as an Anthology of Works for the students of Prof. David Chillag.</p>
    </footer>

    <!-- LOGIC -->
    <script>
        // --- STATE ---
        let currentLang = 'en';
        let currentTheme = 'class-character';

        // --- DICTIONARY ---
        const langData = {
            en: {
                header_name: "Prof. David Chillag",
                header_sub: "1946 - 2012 â€¢ Technion Mathematics",
                nav_legacy: "Legacy",
                nav_themes: "Research",
                nav_tributes: "Memories",
                nav_teaching: "Teaching",
                badge_anthology: "The Anthology",
                hero_title: "Unifying Characters & Conjugacy Classes",
                hero_desc: "A tribute to a master researcher and teacher who revealed the internal structures of finite groups. From his early work with Michio Suzuki to the grand unification of Table Algebras, Professor Chillag's work built a bridge between representation theory and combinatorics.",
                stat_pubs: "Publications",
                stat_pubs_desc: "Spanning 4 decades of continuous output.",
                stat_themes: "Major Themes",
                stat_themes_desc: "Defining distinct eras of discovery.",
                stat_students: "Students Inspired",
                stat_students_desc: "Honored by the 'Chillag Award'.",
                chart_intro_title: "The Shape of a Career",
                chart_intro_desc: "Visualizing the shift from concrete Permutation Groups to the abstract heights of Table Algebras.",
                chart_timeline_title: "Publication Volume by Era",
                chart_topic_title: "Research Focus Distribution",
                themes_title: "Research Themes & Key Papers",
                themes_subtitle: "Navigate the tabs below to explore the pillars of his work. Click any paper title to find it on Google Scholar.",
                label_key_papers: "Key Publications",
                tributes_title: "Voices of Impact",
                tributes_desc: "Memories from students and colleagues, reflecting on his humor, clarity, and kindness.",
                trib_1_text: "\"His 'Yatsag' (Linear Algebra) lectures were legendary. He didn't just teach matrices; he taught us how to think like mathematicians.\"",
                trib_1_name: "Former Student",
                trib_2_text: "\"We honor his memory not just for the theorems he proved, but for the patience he showed every student who knocked on his door.\"",
                trib_2_name: "Colleague",
                trib_3_text: "\"The 'Chillag Award' is the most fitting tribute. He set the standard for what academic excellence looks like in the classroom.\"",
                trib_3_name: "Technion Admin",
                award_title: "The Chillag Award Context",
                award_text_1: "The Technion grants the 'Chillag Award' for excellence in teaching. There is a profound connection between his research and his pedagogy.",
                award_text_2: "Just as his research on Table Algebras sought to reveal hidden structures, his teaching revealed the internal structure of Linear Algebra.",
                legacy_list_title: "Legacy in Practice",
                legacy_item_1: "Yanai Prize Recipient for Excellence.",
                legacy_item_2: "Known for unmatched clarity.",
                legacy_item_3: "Beloved by generations of students.",
                footer_text: "Generated as an Anthology of Works for the students of Prof. David Chillag.",
                // Theme Titles
                theme_core_title: "I. The Core Problem",
                theme_core_sub: "Character Degrees & Class Lengths",
                theme_zeros_title: "II. Zeros of Characters",
                theme_zeros_sub: "Vanishing Sets & Structure",
                theme_frob_title: "III. Frobenius Groups",
                theme_frob_sub: "T.I. Subgroups",
                theme_table_title: "IV. Grand Unification",
                theme_table_sub: "Table Algebras (T-Algebras)"
            },
            he: {
                header_name: "×¤×¨×•×¤' ×“×•×“ ×¦×™×œ×’",
                header_sub: "1946 - 2012 â€¢ ×”×¤×§×•×œ×˜×” ×œ×ž×ª×ž×˜×™×§×”, ×”×˜×›× ×™×•×Ÿ",
                nav_legacy: "×ž×•×¨×©×ª",
                nav_themes: "×ž×—×§×¨",
                nav_tributes: "×–×›×¨×•× ×•×ª",
                nav_teaching: "×”×•×¨××”",
                badge_anthology: "×× ×ª×•×œ×•×’×™×” ×©×œ ×›×ª×‘×™×",
                hero_title: "××™×—×•×“ ×§×¨×§×˜×¨×™× ×•×ž×—×œ×§×•×ª ×¦×ž×™×“×•×ª",
                hero_desc: "×ž×—×•×•×” ×œ×—×•×§×¨ ×•×ž×•×¨×” ×“×’×•×œ ×©×—×©×£ ××ª ×”×ž×‘× ×™× ×”×¤× ×™×ž×™×™× ×©×œ ×—×‘×•×¨×•×ª ×¡×•×¤×™×•×ª. ×ž×¢×‘×•×“×ª×• ×”×ž×•×§×“×ž×ª ×¢× ×ž×™×¦'×™×• ×¡×•×–×•×§×™ ×•×¢×“ ×œ××™×—×•×“ ×”×’×“×•×œ ×©×œ ××œ×’×‘×¨×ª ×”×˜× ×–×•×¨×™×, ×¢×‘×•×“×ª×• ×‘× ×ª×” ×’×©×¨ ×‘×™×Ÿ ×ª×•×¨×ª ×”×”×¦×’×•×ª ×œ×§×•×ž×‘×™× ×˜×•×¨×™×§×”.",
                stat_pubs: "×¤×¨×¡×•×ž×™×",
                stat_pubs_desc: "×¢×œ ×¤× ×™ 4 ×¢×©×•×¨×™× ×©×œ ×™×¦×™×¨×” ×ž×ª×ž×˜×™×ª.",
                stat_themes: "× ×•×©××™× ×¢×™×§×¨×™×™×",
                stat_themes_desc: "×”×’×“×™×¨×• ×ª×§×•×¤×•×ª ×©×•× ×•×ª ×‘×ª×•×¨×ª ×”×—×‘×•×¨×•×ª.",
                stat_students: "×¡×˜×•×“× ×˜×™×",
                stat_students_desc: "×ž×•× ×¦×— ×¢\"×™ '×¤×¨×¡ ×¦×™×œ×’' ×œ×”×•×¨××” ×ž×¦×˜×™×™× ×ª.",
                chart_intro_title: "×ª×ž×•× ×ª ×§×¨×™×™×¨×”",
                chart_intro_desc: "×•×™×–×•××œ×™×–×¦×™×” ×©×œ ×”×ž×¢×‘×¨ ×ž×—×‘×•×¨×•×ª ×ª×ž×•×¨×” ×§×•× ×§×¨×˜×™×•×ª ×œ×’×‘×”×™× ×”×ž×•×¤×©×˜×™× ×©×œ ××œ×’×‘×¨×ª ×”×˜× ×–×•×¨×™×.",
                chart_timeline_title: "× ×¤×— ×¤×¨×¡×•×ž×™× ×œ×¤×™ ×ª×§×•×¤×”",
                chart_topic_title: "×”×ª×¤×œ×’×•×ª × ×•×©××™ ×ž×—×§×¨",
                themes_title: "× ×•×©××™ ×ž×—×§×¨ ×•×ž××ž×¨×™× × ×‘×—×¨×™×",
                themes_subtitle: "× ×•×•×˜ ×‘×™×Ÿ ×”×œ×©×•× ×™×•×ª ×›×“×™ ×œ×—×§×•×¨ ××ª ×¢×ž×•×“×™ ×”×ª×•×•×š ×©×œ ×¢×‘×•×“×ª×•. ×œ×—×¥ ×¢×œ ×©× ×ž××ž×¨ ×œ×—×™×¤×•×© ×‘×’×•×’×œ ×¡×§×•×œ×¨.",
                label_key_papers: "×¤×¨×¡×•×ž×™× × ×‘×—×¨×™×",
                tributes_title: "×§×•×œ×•×ª ×©×œ ×”×©×¤×¢×”",
                tributes_desc: "×–×™×›×¨×•× ×•×ª ×ž×¡×˜×•×“× ×˜×™× ×•×¢×ž×™×ª×™×, ×”×ž×©×§×¤×™× ××ª ×”×”×•×ž×•×¨, ×”×‘×”×™×¨×•×ª ×•×˜×•×‘ ×”×œ×‘ ×©×œ×•.",
                trib_1_text: "\"×”×¨×¦××•×ª ×”'×™×¦\"×’' (××œ×’×‘×¨×” ×œ×™× ×™××¨×™×ª) ×©×œ×• ×”×™×• ××’×“×™×•×ª. ×”×•× ×œ× ×¨×§ ×œ×™×ž×“ ×ž×˜×¨×™×¦×•×ª; ×”×•× ×œ×™×ž×“ ××•×ª× ×• ×œ×—×©×•×‘ ×›×ž×• ×ž×ª×ž×˜×™×§××™×.\"",
                trib_1_name: "×¡×˜×•×“× ×˜ ×œ×©×¢×‘×¨",
                trib_2_text: "\"×× ×• ×ž×›×‘×“×™× ××ª ×–×›×¨×• ×œ× ×¨×§ ×‘×©×œ ×”×ž×©×¤×˜×™× ×©×”×•×›×™×—, ××œ× ×‘×©×œ ×”×¡×‘×œ× ×•×ª ×©×”×¤×’×™×Ÿ ×œ×›×œ ×¡×˜×•×“× ×˜ ×©×“×¤×§ ×¢×œ ×“×œ×ª×•.\"",
                trib_2_name: "×¢×ž×™×ª ×œ×ž×—×œ×§×”",
                trib_3_text: "\"'×¤×¨×¡ ×¦×™×œ×’' ×”×•× ×”×ž×—×•×•×” ×”×ž×ª××™×ž×” ×‘×™×•×ª×¨. ×”×•× ×”×¦×™×‘ ××ª ×”×¨×£ ×œ×ž×¦×•×™× ×•×ª ××§×“×ž×™×ª ×‘×›×™×ª×”.\"",
                trib_3_name: "×”× ×”×œ×ª ×”×˜×›× ×™×•×Ÿ",
                award_title: "×”×§×©×¨ ×œ×¤×¨×¡ ×¦×™×œ×’",
                award_text_1: "×”×˜×›× ×™×•×Ÿ ×ž×¢× ×™×§ ××ª '×¤×¨×¡ ×¦×™×œ×’' ×œ×”×¦×˜×™×™× ×•×ª ×‘×”×•×¨××”. ×§×™×™× ×§×©×¨ ×¢×ž×•×§ ×‘×™×Ÿ ×”×ž×—×§×¨ ×©×œ×• ×œ×¤×“×’×•×’×™×” ×©×œ×•.",
                award_text_2: "×›×©× ×©×ž×—×§×¨×• ×¢×œ ××œ×’×‘×¨×ª ×”×˜× ×–×•×¨×™× ×‘×™×§×© ×œ×—×©×•×£ ×ž×‘× ×™× × ×¡×ª×¨×™×, ×”×•×¨××ª ×”××œ×’×‘×¨×” ×”×œ×™× ×™××¨×™×ª ×©×œ×• ×—×©×¤×” ××ª ×”×ž×‘× ×” ×”×¤× ×™×ž×™ ×©×œ ×”×ž×¨×—×‘ ×”×•×•×§×˜×•×¨×™.",
                legacy_list_title: "×ž×•×¨×©×ª ×‘×¤×•×¢×œ",
                legacy_item_1: "×–×•×›×” ×¤×¨×¡ ×™× ××™ ×œ×ž×¦×•×™× ×•×ª ×‘×—×™× ×•×š ×”××§×“×ž×™.",
                legacy_item_2: "×™×“×•×¢ ×‘×‘×”×™×¨×•×ª ×”×¡×‘×¨ ×™×•×¦××ª ×“×•×¤×Ÿ.",
                legacy_item_3: "××”×•×‘ ×¢×œ ×“×•×¨×•×ª ×©×œ ×¡×˜×•×“× ×˜×™×.",
                footer_text: "× ×•×¦×¨ ×›×× ×ª×•×œ×•×’×™×” ×©×œ ×¢×‘×•×“×•×ª ×¢×‘×•×¨ ×ª×œ×ž×™×“×™×• ×©×œ ×¤×¨×•×¤' ×“×•×“ ×¦×™×œ×’.",
                // Theme Titles
                theme_core_title: "I. ×”×‘×¢×™×” ×”×ž×¨×›×–×™×ª",
                theme_core_sub: "×“×¨×’×•×ª ×§×¨×§×˜×¨×™× ×•××•×¨×›×™ ×ž×—×œ×§×•×ª",
                theme_zeros_title: "II. ××¤×¡×™× ×©×œ ×§×¨×§×˜×¨×™×",
                theme_zeros_sub: "×§×‘×•×¦×•×ª ××™×¤×•×¡ ×•×ž×‘× ×”",
                theme_frob_title: "III. ×—×‘×•×¨×•×ª ×¤×¨×•×‘× ×™×•×¡",
                theme_frob_sub: "×ª×ª-×—×‘×•×¨×•×ª T.I.",
                theme_table_title: "IV. ×”××™×—×•×“ ×”×’×“×•×œ",
                theme_table_sub: "××œ×’×‘×¨×ª ×”×˜× ×–×•×¨×™× (T-Algebras)"
            }
        };

        // --- PAPER DATA ---
        const themeData = {
            'class-character': {
                desc: {
                    en: "This theme represents the central focus of his mid-career. He explored how arithmetic properties of the sets cd(G) and cs(G) place powerful restrictions on the structure of the group G.",
                    he: "× ×•×©× ×–×” ×ž×™×™×¦×’ ××ª ×”×ž×•×§×“ ×”×ž×¨×›×–×™ ×©×œ ××ž×¦×¢ ×”×§×¨×™×™×¨×” ×©×œ×•. ×”×•× ×—×§×¨ ×›×™×¦×“ ×ª×›×•× ×•×ª ××¨×™×ª×ž×˜×™×•×ª ×©×œ ×§×‘×•×¦×•×ª ×“×¨×’×•×ª ×”×§×¨×§×˜×¨×™× ×•×’×“×œ×™ ×ž×—×œ×§×•×ª ×”×¦×ž×™×“×•×ª ×ž×˜×™×œ×•×ª ×ž×’×‘×œ×•×ª ×—×–×§×•×ª ×¢×œ ×ž×‘× ×” ×”×—×‘×•×¨×”."
                },
                papers: [
                    { id: "14", year: "1983", title: "On the structure of finite groups with a small number of character degrees" },
                    { id: "15", year: "1983", title: "On the length of the conjugacy classes of finite groups (with M. Herzog)" },
                    { id: "16", year: "1984", title: "Finite groups with a small number of conjugacy classes (with Z. Arad)" },
                    { id: "26", year: "1990", title: "Character degrees and class length in p-groups" }
                ]
            },
            'zeros': {
                desc: {
                    en: "A fundamental result (Burnside) states that a non-linear irreducible character must take the value zero somewhere. Chillag investigated *where* and *how often* they vanish.",
                    he: "×ª×•×¦××” ×™×¡×•×“×™×ª (×‘×¨× ×¡×™×™×“) ×§×•×‘×¢×ª ×›×™ ×§×¨×§×˜×¨ ××™-×¤×¨×™×§ ×œ× ×œ×™× ×™××¨×™ ×—×™×™×‘ ×œ×”×ª××¤×¡ ×”×™×›×Ÿ ×©×”×•×. ×¦×™×œ×’ ×—×§×¨ *×”×™×›×Ÿ* ×•*×‘××™×–×• ×ª×“×™×¨×•×ª* ×”× ×ž×ª××¤×¡×™×."
                },
                papers: [
                    { id: "20", year: "1987", title: "On zeros of characters of finite groups" }
                ]
            },
            'frobenius': {
                desc: {
                    en: "Frobenius groups are critical building blocks. Chillag used T.I. (Trivial Intersection) subgroups as a clean test case for character-theoretic methods.",
                    he: "×—×‘×•×¨×•×ª ×¤×¨×•×‘× ×™×•×¡ ×”×Ÿ ××‘× ×™ ×‘× ×™×™×Ÿ ×§×¨×™×˜×™×•×ª. ×¦×™×œ×’ ×”×©×ª×ž×© ×‘×ª×ª-×—×‘×•×¨×•×ª T.I. ×›×ž×§×¨×” ×ž×‘×—×Ÿ × ×§×™ ×œ×©×™×˜×•×ª ×ž×ª×•×¨×ª ×”×§×¨×§×˜×¨×™×."
                },
                papers: [
                    { id: "21", year: "1988", title: "On groups of Frobenius type" },
                    { id: "36", year: "1995", title: "On finite groups containing a T.I. subgroup (with Z. Arad)" }
                ]
            },
            'table-algebra': {
                desc: {
                    en: "The culmination of his research. With Zvi Arad, he formalized Table Algebras (T-Algebras), allowing Linear Algebra tools to solve deep Group Theory problems.",
                    he: "×©×™× ×ž×—×§×¨×•. ×™×—×“ ×¢× ×¦×‘×™ ××¨×“, ×”×•× ×”×¤×š ××ª ××œ×’×‘×¨×ª ×”×˜× ×–×•×¨×™× ×œ×¤×•×¨×ž×œ×™×•×ª, ×ž×” ×©××¤×©×¨ ×©×™×ž×•×© ×‘×›×œ×™× ×ž××œ×’×‘×¨×” ×œ×™× ×™××¨×™×ª ×œ×¤×ª×¨×•×Ÿ ×‘×¢×™×•×ª ×¢×ž×•×§×•×ª ×‘×ª×•×¨×ª ×”×—×‘×•×¨×•×ª."
                },
                papers: [
                    { id: "18", year: "1985", title: "Nonnegative matrices and products of characters..." },
                    { id: "30", year: "1991", title: "Generalized circulants and T-algebras" },
                    { id: "32", year: "1992", title: "Table algebras and applications to finite groups (with Z. Arad)" },
                    { id: "40", year: "2001", title: "Characters and table algebras (with Arad, Fisman, et al.)" }
                ]
            }
        };

        // --- FUNCTIONS ---

        function toggleLang() {
            currentLang = currentLang === 'en' ? 'he' : 'en';
            
            // 1. Flip Direction
            document.body.dir = currentLang === 'he' ? 'rtl' : 'ltr';
            
            // 2. Update Toggle Button
            document.getElementById('lang-text').innerText = currentLang === 'en' ? 'Hebrew' : 'English';
            document.getElementById('lang-icon').innerText = currentLang === 'en' ? 'ðŸ‡®ðŸ‡±' : 'ðŸ‡ºðŸ‡¸';

            // 3. Update Static Text
            document.querySelectorAll('[data-key]').forEach(el => {
                const key = el.getAttribute('data-key');
                if(langData[currentLang][key]) {
                    el.classList.add('fade-text');
                    setTimeout(() => el.classList.remove('fade-text'), 500);
                    el.innerText = langData[currentLang][key];
                }
            });

            // 4. Re-render Theme Section (Tabs & Content)
            renderThemeTabs();
            updateTheme(currentTheme);
            
            // 5. Update Alignment helpers
            const statsGrid = document.getElementById('stats-grid');
            if(currentLang === 'he') {
                statsGrid.classList.remove('text-left');
                statsGrid.classList.add('text-right');
            } else {
                statsGrid.classList.remove('text-right');
                statsGrid.classList.add('text-left');
            }
        }

        function renderThemeTabs() {
            const container = document.getElementById('theme-tabs-container');
            container.innerHTML = '';

            const themes = [
                { id: 'class-character', titleKey: 'theme_core_title', subKey: 'theme_core_sub' },
                { id: 'zeros', titleKey: 'theme_zeros_title', subKey: 'theme_zeros_sub' },
                { id: 'frobenius', titleKey: 'theme_frob_title', subKey: 'theme_frob_sub' },
                { id: 'table-algebra', titleKey: 'theme_table_title', subKey: 'theme_table_sub' }
            ];

            themes.forEach(t => {
                const btn = document.createElement('button');
                btn.onclick = () => updateTheme(t.id);
                btn.id = `btn-${t.id}`;
                // Flex logic for RTL vs LTR arrow placement
                const arrow = `<span class="text-xl group-hover:scale-125 transition transform ${currentLang === 'he' ? 'rotate-180' : ''}">â†’</span>`;
                
                btn.className = `theme-btn text-start px-6 py-4 rounded-lg border border-slate-200 hover:bg-slate-50 transition flex items-center justify-between group w-full`;
                btn.innerHTML = `
                    <span>
                        <span class="block font-bold text-lg">${langData[currentLang][t.titleKey]}</span>
                        <span class="text-sm opacity-70">${langData[currentLang][t.subKey]}</span>
                    </span>
                    ${arrow}
                `;
                container.appendChild(btn);
            });
        }

        function updateTheme(key) {
            currentTheme = key;
            const data = themeData[key];
            
            // Update Text
            // Find title key from langData
            let titleKey, subKey;
            if(key === 'class-character') { titleKey = 'theme_core_title'; subKey = 'theme_core_sub'; }
            else if(key === 'zeros') { titleKey = 'theme_zeros_title'; subKey = 'theme_zeros_sub'; }
            else if(key === 'frobenius') { titleKey = 'theme_frob_title'; subKey = 'theme_frob_sub'; }
            else if(key === 'table-algebra') { titleKey = 'theme_table_title'; subKey = 'theme_table_sub'; }

            document.getElementById('theme-title').innerText = langData[currentLang][titleKey] + ": " + langData[currentLang][subKey];
            document.getElementById('theme-desc').innerText = data.desc[currentLang];
            
            // Update Papers List
            const paperContainer = document.getElementById('theme-papers');
            paperContainer.innerHTML = ''; 
            
            data.papers.forEach(p => {
                // Generate Smart Link
                const searchUrl = `https://scholar.google.com/scholar?q=${encodeURIComponent("David Chillag " + p.title)}`;
                
                const paperLink = document.createElement('a');
                paperLink.href = searchUrl;
                paperLink.target = "_blank";
                paperLink.className = "paper-link block no-underline"; // Reset block for anchor
                
                paperLink.innerHTML = `
                    <div class="flex items-start p-3 rounded bg-white border border-slate-100 shadow-sm hover:shadow-md transition cursor-pointer group">
                        <div class="bg-slate-100 text-slate-600 text-xs font-bold px-2 py-1 rounded ${currentLang === 'he' ? 'ml-3' : 'mr-3'} mt-1 min-w-[45px] text-center group-hover:bg-amber-100 group-hover:text-amber-800 transition">
                            ${p.year}
                        </div>
                        <div>
                            <div class="text-sm font-bold text-slate-700 group-hover:text-amber-700 transition flex items-center gap-2">
                                <span>Paper #${p.id}</span>
                                <span class="text-xs opacity-50">ðŸ”—</span>
                            </div>
                            <div class="text-sm text-slate-600 italic" dir="ltr">${p.title}</div>
                        </div>
                    </div>
                `;
                paperContainer.appendChild(paperLink);
            });

            // Update Buttons Active State
            document.querySelectorAll('.theme-btn').forEach(btn => {
                btn.classList.remove('active', 'bg-slate-800', 'text-white', 'border-slate-800');
            });
            const activeBtn = document.getElementById(`btn-${key}`);
            if(activeBtn) activeBtn.classList.add('active');
        }

        // --- INIT ---
        renderThemeTabs(); // Build tabs
        updateTheme('class-character'); // Load first content

        // --- CHARTS ---
        // (Charts stay generic/numeric, so labels are updated dynamically isn't critical for v1, 
        // but for polish we could destroy/recreate. For now, they are readable in English globally).
        
        const ctxTimeline = document.getElementById('timelineChart').getContext('2d');
        new Chart(ctxTimeline, {
            type: 'bar',
            data: {
                labels: ['1973-1977', '1978-1982', '1983-1987', '1988-1992', '1993-1997', '1998-2002', '2003+'],
                datasets: [{
                    label: 'Publications',
                    data: [5, 3, 8, 9, 6, 5, 3],
                    backgroundColor: '#cbd5e1',
                    hoverBackgroundColor: '#f59e0b',
                    borderRadius: 4
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: { legend: { display: false } },
                scales: {
                    y: { beginAtZero: true, grid: { color: '#f1f5f9' } },
                    x: { grid: { display: false } }
                }
            }
        });

        const ctxTopic = document.getElementById('topicChart').getContext('2d');
        new Chart(ctxTopic, {
            type: 'doughnut',
            data: {
                labels: ['Permutations', 'Characters', 'Table Algebras', 'Other'],
                datasets: [{
                    data: [15, 35, 40, 10],
                    backgroundColor: ['#94a3b8', '#475569', '#0f172a', '#cbd5e1'],
                    borderWidth: 0
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                cutout: '70%',
                plugins: { legend: { position: 'bottom', labels: { usePointStyle: true, padding: 20 } } }
            }
        });

    </script>
</body>
</html>
